YUI.add("hermes-template-photo-well-media-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s,o;r+='\n	<div class="restricted-interstitial">\n		<div class="restricted-interstitial-message">\n			<h2>',o={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</h2>\n			",s=n["if"].call(e,e.isSignedIn,{hash:{},inverse:l.program(4,p,t),fn:l.program(2,h,t),data:t});if(s||s===0)r+=s;return r+="\n		</div>\n	</div>\n",r}function h(e,t){var r="",i,s;return r+="\n				<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n				<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n				<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n			",r}function p(e,t){var r="",i,s,o;return r+="\n				<p>",o={hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+' <a href="//',(s=n.host)?s=s.call(e,{hash:{},data:t}):(s=e.host,s=typeof s===f?s.apply(e):s),r+=a(s)+'/signin/" data-track="photoWellSignInClick">',o={hash:{intlName:"common.SIGN_IN"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):u.call(e,"intlMessage",o)))+"</a></p>\n			",r}function d(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.isVideo,{hash:{},inverse:l.program(9,m,t),fn:l.program(7,v,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function v(e,t){var r="",i;return r+='\n		<div class="videoplayer main-photo" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px; height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;"></div>\n	',r}function m(e,t){var r="",i,s,o;return r+='\n\n		<span class="facade-of-protection-neue" style="width:',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=a(i)+"px;height:",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=a(i)+'px;">\n			',o={hash:{},data:t},r+=a((i=n.outlet||e.outlet,i?i.call(e,e["zoom-view"],o):u.call(e,"outlet",e["zoom-view"],o)))+'\n		</span>\n		\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.src)?s=s.call(e,{hash:{},data:t}):(s=e.src,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="low-res-photo">\n		<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo is-hidden" onload="registerFirstPhoto(this)">\n		<noscript>\n			<img width="',(s=n.width)?s=s.call(e,{hash:{},data:t}):(s=e.width,s=typeof s===f?s.apply(e):s),r+=a(s)+'" height="',(s=n.height)?s=s.call(e,{hash:{},data:t}):(s=e.height,s=typeof s===f?s.apply(e):s),r+=a(s)+'" src="',(s=n.highResSrc)?s=s.call(e,{hash:{},data:t}):(s=e.highResSrc,s=typeof s===f?s.apply(e):s),r+=a(s)+'" class="main-photo">\n		</noscript>\n	',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:l.program(6,d,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-media-novideo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<div class='restricted-interstitial'>\n		<div class='restricted-interstitial-message'>\n			<h2>",s={hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</h2>\n			<p>",s={hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"<br />",s={hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</p>\n			<p><button class='ui-button'><span>",s={hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span></button></p>\n			<p>",s={hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:t},r+=a((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):u.call(e,"intlHTMLMessage",s)))+"</p>\n		</div>\n	</div>\n",r}function h(e,t){var r="",i;r+='\n	<img onload="registerFirstPhoto(this)" class="main-photo',i=n["if"].call(e,e.isVideo,{hash:{},inverse:f.noop,fn:f.program(4,p,t),data:t});if(i||i===0)r+=i;r+='" width="',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===l?i.apply(e):i),r+=a(i)+'" height="',(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===l?i.apply(e):i),r+=a(i)+'" src="',(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===l?i.apply(e):i),r+=a(i)+'">\n	',i=n["if"].call(e,e.isVideo,{hash:{},inverse:f.noop,fn:f.program(6,d,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){return" is-video"}function d(e,t){var r="",i,s;return r+='\n	<span class="video-coming-soon hide-text">!</span>\n	<span class="video-coming-soon-text">',s={hash:{intlName:"photo-page-scrappy.VIDEO_COMING_SOON"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this,l="function";o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:f.program(3,h,i),fn:f.program(1,c,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-media-novideo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-photo-well-ad",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;return r+='<a class="ad-frame" href="',(i=n.clickUrl)?i=i.call(e,{hash:{},data:t}):(i=e.clickUrl,i=typeof i===a?i.apply(e):i),r+=f(i)+'" data-track="ad_link_image" target="_blank">',r}function d(e,t){var r="",i,s;return r+='\n    <div class="ad-wrapper">\n        <img width=\'',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+'\'/>\n        <a class="ad-footer" href="',s={hash:{},data:t},r+=f((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.clickUrl,s):l.call(e,"renderTrustedMarkup",e.clickUrl,s)))+'" data-track="ad_link_bottom" target="_blank">\n            <h1>',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</h1>\n        </a>\n    </div>\n",r}function v(e,t){var r="",i;return r+="\n    <img width='",(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+"' height='",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+"' src='",(i=n.src)?i=i.call(e,{hash:{},data:t}):(i=e.src,i=typeof i===a?i.apply(e):i),r+=f(i)+"' />\n",r}function m(e,t){var r="",i,s;return r+='\n<div class="more-info"> \n\n	<span><i class="moneyball"></i> ',s={hash:{intlName:"photo-page-scrappy.FIND_OUT_MORE_AD",brand:e.brand},data:t},r+=f((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):l.call(e,"intlHTMLMessage",s)))+"</span>\n</div>\n</a>",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=n.helperMissing,c=this,h=n.blockHelperMissing;o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n",u={hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n",u={hash:{},inverse:c.program(5,v,i),fn:c.noop,data:i},(o=n.adsTypeB)?o=o.call(t,u):(o=t.adsTypeB,o=typeof o===a?o.apply(t):o),n.adsTypeB||(o=h.call(t,o,u));if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.adFrame,{hash:{},inverse:c.noop,fn:c.program(7,m,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-well-ad",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("photo-well-media-scrappy-view",function(e){var t=500,n=500,r=40,i;i={photo:{render:function(){var t=this,n,r=this.get("photo"),i,s,o;t.preloadImage&&(t.preloadImage.onload=null),this.appContext.isJavaScriptDisabled?(i=this.getPhotoForDisplay({canvas:{width:Number.MAX_VALUE,height:Number.MAX_VALUE}}),s=i):(i=this.getPhotoForDisplay(),s=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]})),o=this.get("container").one(".main-photo");if(!o||parseInt(o.getAttribute("width"),10)!==i.width||parseInt(o.getAttribute("height"),10)!==i.height)n=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:s.url,highResSrc:i.url,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:!1,"zoom-view":this.subviews["zoom-view"]?this.subviews["zoom-view"].get("container"):""}),this.setContainerHTML(n);return YUI.Env.isServer?(this.serverWidth=i.width,this.serverHeight=i.height):r.getValue("needsInterstitial")||(t.preloadImage=new Image,t.preloadImage.onload=function(){if(this.onloadFired)return;if(!t.isActiveAndInDOM())return;this.onloadFired=!0,e.rapidTracker.beacon(this.name,"photoPageShowedSize"+(/(?:_([a-z]))?\.jpg/.exec(i.url)[1]||"\u00f8").toUpperCase());var n=t.get("container").one(".low-res-photo"),r=t.get("container").one(".main-photo");r.removeClass("is-hidden").show(),n.hide()},t.preloadImage.src=i.url,t.preloadImage.complete&&t.preloadImage.onload()),this}},video:{render:function(){var t,n=this,r=this.get("photo"),i=this.getPhotoForDisplay({excludeSizes:[]});return this.player?(this.player.resize(i.width,i.height),this):(t=this.templates("photo-well-media-scrappy")({width:i.width,height:i.height,src:i.url,needsInterstitial:r.getValue("needsInterstitial"),isVideo:!0,isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.setContainerHTML(t),YUI.Env.isServer?this:(this.player=new e.FlickrVideoPlayer({container:this.get("container").one(".videoplayer"),model:r,appContext:this.appContext}),n.player.init().then(function(){}),this.on("destroy",function(){n.player.destroy(),n.player=null}),this))}},yepVideoDisabled:{render:function(){var e,t=this.get("photo"),n=this.getPhotoForDisplay();return e=this.templates("photo-well-media-novideo")({width:n.width,height:n.height,src:n.url,needsInterstitial:t.getValue("needsInterstitial"),isVideo:t.getValue("isVideo")}),this.setContainerHTML(e),this}},ad:{render:function(){var e,t,n;return this.adJSON?t=this.adJSON:(t=this.appContext.adManager.getAdJSON(),this.adJSON=t),n=this.getAdSize(t),e=this.templates("photo-well-ad")({width:n.width,height:n.height,src:t.url,clickUrl:t.clickUrl,brand:t.brand,adsTypeB:this.appContext.flipper.isFlipped("moneyball-ads-type-b"),adFrame:!0}),this.setContainerHTML(e),this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-scrappy-zoom")}}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){e.set("photo",t)})},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):this.appContext.flipper.isFlipped("yep-video")?i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this):i.yepVideoDisabled.render.call(this),this},handleInterstitialDismissButtonClick:function(t){var n=this,r=this.get("personPreferences"),i=this.get("photo"),s=i.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),r.setValue("safeSearch",s),r.registry.remoteUpdate(n.appContext.auth.user.nsid).then(function(e){var t=i.registry.attributeSearch({needsInterstitial:!0});t.forEach(function(e){i.registry.getValue(e,"safetyLevel")<=r.getValue("safeSearch")&&i.registry.setValue(e,"needsInterstitial",!1)}),n.buildContainer()},function(e){n.appContext.error(e.message),n.appContext.error(e.stack),n.onError(n.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))})},onParentViewEvent:function(e,t){t&&t[0]==="photoWellResized"&&(this.get("photo").getValue("needsInterstitial")||(this.set("canvasSizeIsDirty",!0),this.buildContainer()))},activate:function(){var t=this,n,r;return this.get("photo").getValue("needsInterstitial")||this.registerEventHandler(e.on("flickr:photo-media-well-update",function(e){t.set("canvasSizeIsDirty",!0),t.buildContainer()})),this.registerEventHandler(e.on("flickr:display-note-box",function(i){n=e.Node.create('<div class="note-box"></div>'),r=t.get("container").one(".main-photo").getXY(),t.get("container").append(n),n.setStyles({top:i.noteBoxTop+t.get("container").one(".main-photo").getDOMNode().offsetTop,left:i.noteBoxLeft,width:i.noteBoxWidth,height:i.noteBoxHeight})})),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",t.appContext.auth.user.nsid).then(function(e){t.set("personPreferences",e),t.get("photo").getValue("needsInterstitial")&&t.registerEventHandler(t.get("container").one(".restricted-interstitial-message button").on("click",t.handleInterstitialDismissButtonClick,t))}),this},onError:function(t){var n=this;this.fire("subviewViewEvent","getDialogOffset",function(r){var i=e.Views.dialog.getInstance("dialog-alert",{content:t,attrs:{title:"Error",level:"warning",confirmLabel:"OK"},parent:n,offsetLeft:r,dialogClass:"scrappy-dialog"});i.show()})},getPhotoForDisplay:function(e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r,i,s;return e&&e.canvasSize&&(t=e.canvasSize),r=this.get("photo").getSizeToFit(t,e),i=Math.min(t.height/n,r.height),s=Math.min(t.width/n,r.width/r.height*i),i=Math.min(i,r.height/r.width*s),{width:Math.round(s),height:Math.round(i),url:r.url,pixelRatio:r.width/s}},getAdSize:function(
e){var t=this.getCanvasSize(),n=this.getPixelRatio(),r=80,i=140,s,o;return this.appContext.flipper.isFlipped("moneyball-ads-type-b")&&(t.height-=(r+i)*n,t.width-=i*n),s=Math.min(t.height/n,e.height),o=Math.min(t.width/n,e.width/e.height*s),s=Math.min(s,e.height/e.width*o),{width:o,height:s}},getCanvasSize:function(){var e,i=this.getPixelRatio(),s,o=this.get("container"),u,a,f,l,c={width:t,height:n};return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(s=this.get("container").ancestor(),u=o.getStyle("paddingTop")?parseInt(o.getStyle("paddingTop").match(/[0-9]+/)[0],10):0,a=o.getStyle("paddingBottom")?parseInt(o.getStyle("paddingBottom").match(/[0-9]+/)[0],10):0,l=r,f=r,s&&(e=s.get("region"),e.height=parseInt(s.getStyle("height").match(/[0-9]+/)[0],10)-(u+a),e.width=this.appContext.viewportData.viewport.width-(l+f))):e=this.get("cachedCanvasSize"),this.appContext.viewportData.viewport.width>0&&(c={width:this.appContext.viewportData.viewport.width,height:this.appContext.viewportData.viewport.height-240}),e||(e={top:0,left:0,bottom:n,right:t,width:c.width,height:c.height}),e.height*=i,e.width*=i,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})},"@VERSION@",{requires:["flog","flickr-view","moment","flickr-video-player","zoom-view","hermes-template-photo-well-media-scrappy","hermes-template-photo-well-media-novideo","hermes-template-photo-well-ad"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-context-slider-photo",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){return"currentImage"}function c(e,t){return"restricted-image"}function h(e,t){return"\n		<span class='play-slideshow'>&#9654;</span>\n		<span class='countdown-slideshow'></span>\n	"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=this,a="function",f=this.escapeExpression;s+='<a class="context-thumb emptyImage ',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(1,l,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.needsInterstitial,{hash:{},inverse:u.noop,fn:u.program(3,c,i),data:i});if(o||o===0)s+=o;s+='" href="',(o=n.url)?o=o.call(t,{hash:{},data:i}):(o=t.url,o=typeof o===a?o.apply(t):o),s+=f(o)+'" data-track="contextSliderNextPhotoClick" style="background-image: url(',(o=n.background)?o=o.call(t,{hash:{},data:i}):(o=t.background,o=typeof o===a?o.apply(t):o),s+=f(o)+"); left: ",(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===a?o.apply(t):o),s+=f(o)+'px" data-photo-id="',(o=n.id)?o=o.call(t,{hash:{},data:i}):(o=t.id,o=typeof o===a?o.apply(t):o),s+=f(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+'">\n	',o=n["if"].call(t,t.currentPhoto,{hash:{},inverse:u.noop,fn:u.program(5,h,i),data:i});if(o||o===0)s+=o;return s+="\n</a>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-photo",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-slider-scrappy",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function l(e,t){var r="",i,s;return r+="\n	<div class='loadingError'>\n		<p>",s={hash:{intlName:"photo-page-scrappy.ERROR_LOADING_CONTEXT"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'</p>\n		<p><button href="#" class="ui-button ui-button-cta ui-button-transparent retry">',s={hash:{intlName:"common.RETRY"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</button></p>\n	</div>\n",r}function c(e,t){var r="",i;r+="\n\n	<div class='context-slider small-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n		<div class="wrapper is-ready clear-float small-photos">\n\n			<div class="slider">\n\n				',i=n.each.call(e,e.previousPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n				",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(10,v,t),fn:f.program(8,d,t),data:t});if(i||i===0)r+=i;r+="\n\n\n				",i=n.each.call(e,e.nextPhotos,{hash:{},inverse:f.noop,fn:f.program(6,p,t),data:t});if(i||i===0)r+=i;r+="\n\n			</div>\n\n		</div>\n\n	</div>\n\n	",i=n["if"].call(e,e.showBigSlider,{hash:{},inverse:f.noop,fn:f.program(13,g,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function h(e,t){return"slideshowEnabled"}function p(e,t){var i="",s;i+="\n					",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n				",i}function d(e,t){return'\n					<a class="context-thumb middle currentImage adThumb">Ad</a>\n				'}function v(e,t){var r="",i;r+="\n					",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+="\n				",r}function m(e,t){var i="",s;i+="\n						",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n					",i}function g(e,t){var r="",i;r+="\n		<div class='context-slider big-slider ",i=n["if"].call(e,e.slideshowEnabled,{hash:{},inverse:f.noop,fn:f.program(4,h,t),data:t});if(i||i===0)r+=i;r+='\'>\n\n			<span class="nav nav-l">\n				<span class="hide-text">&larr;</span>\n			</span>\n\n			<div class="wrapper clear-float">\n\n				<div class="slider">\n\n					',i=n.each.call(e,e.previousBigPhotos,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n["if"].call(e,e["is-ad"],{hash:{},inverse:f.program(16,b,t),fn:f.program(14,y,t),data:t});if(i||i===0)r+=i;r+="\n\n					",i=n.each.call(e,e.nextBigPhotos,{hash:{},inverse:f.noop,fn:f.program(11,m,t),data:t});if(i||i===0)r+=i;return r+='\n\n				</div>\n\n			</div>\n\n			<span class="nav nav-r">\n				<span class="hide-text">&rarr;</span>\n			</span>\n\n		</div>\n	',r}function y(e,t){return'\n						<a class="context-thumb middle currentImage adThumb">Ad</a>\n					'}function b(e,t){var r="",i;r+="\n						",i=n.each.call(e,e.currentPhoto,{hash:{},inverse:f.noop,fn:f.program(17,w,t),data:t});if(i||i===0)r+=i;return r+="\n					",r}function w(e,t){var i="",s;i+="\n							",s=f.invokePartial(r["context-slider-photo"],"context-slider-photo",e,n,r,t);if(s||s===0)i+=s;return i+="\n						",i}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=this.merge(r,e.partials),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f=this;o=n["if"].call(t,t.loadingError,{hash:{},inverse:f.program(3,c,i),fn:f.program(1,l,i),data:i});if(o||o===0)s+=o;return s+="\n",s}),r={};e.Array.each(["context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo","context-slider-photo"],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-slider-scrappy",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo","hermes-template-context-slider-photo"]});
YUI.add("hermes-template-context-image",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;return r+='\n\n	<a data-loaded="false" style="left:',(i=n.left)?i=i.call(e,{hash:{},data:t}):(i=e.left,i=typeof i===o?i.apply(e):i),r+=u(i)+';float:left;display:block;position:absolute;background-color:gray;height:40px;width:86px;border:1px solid transparent;" href="#">\n		\n	</a>\n\n',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.each.call(t,t.images,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-image",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-context-text",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='\n\n<span data-loaded="true" style="left:',(o=n.left)?o=o.call(t,{hash:{},data:i}):(o=t.left,o=typeof o===u?o.apply(t):o),s+=a(o)+';float:left;display:block;position:absolute;height:40px;width:86px;border:1px solid #ccc;" href="#">\n	',(o=n.text)?o=o.call(t,{hash:{},data:i}):(o=t.text,o=typeof o===u?o.apply(t):o),s+=a(o)+"\n</span>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/context-text",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("context-slider-scrappy-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.contextData=e.clone(t.context,!0),this.currentPosition=0,this.numberOfPhotosEitherSideInViewPort=3,this.numberOfPositionsToMove=3,this.numberOfPositionsToBuffer=3,this.positionsLoadedNext=0,this.positionsLoadedPrev=0,this.positionsAheadLimit=25,this.numberOfPositionsToPreFetch=t.numberOfPositionsToPreFetch,this.numberOfPositionsToRefetchAt=t.numberOfPositionsToRefetchAt,this.photoWidth=50,this.photoMargin=15,this.photoWidthPlusMargin=65,this.photoWidthSmall=20,this.photoMarginSmall=5,this.photoWidthPlusMarginSmall=25,this.atStart=!1,this.atEnd=!1,this.isAd=!!t.ad,this.photosInSlider={},!YUI.Env.isServer&&e.StorageHelper.getItem("slideshowInProgress")==="true"?this.slideshowInProgress=!0:this.slideshowInProgress=!1,this.slideshowDwellSeconds=5,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var t=this,n=t.contextData,r=new e.FlickrPromise({photo:t.appContext.getModel("photo-models",t.photoId),context:t.appContext.getModel(n.modelName,n.params)});return r.then(function(e){t.set("photo",e.photo),t.set("contextModel",e.context)},function(e){if(!e.getModelFailure&&e.code!==1||n.modelName==="photostream-models")throw e;return t.contextData.modelName="photostream-models",t.appContext.getModel("photo-models",t.photoId).then(function(e){return t.set("photo",e),t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.appContext.getModel("photostream-models",t.contextData.params).then(function(e){t.set("contextModel",e)})})}).then(function(){var r=e.merge(n.params,{photoId:t.photoId,numNext:t.numberOfPositionsToPreFetch,numPrev:t.numberOfPositionsToPreFetch,refetchAt:t.numberOfPositionsToRefetchAt});return t.get("contextModel").getValue("photoContextList").getContext(r)}).then(function(e){t.positionsLoadedNext=t.positionsLoadedNext+e.next.length,t.positionsLoadedPrev=t.positionsLoadedPrev+e.previous.length,t.photosInSlider[0]=t.get("photo").getValue("id"),t.set("initialContextResponse",e)},function(e){if(e.notInContext)return t.get("contextModel").setValue("photoContextList",[]),t.contextData.modelName="photostream-models",t.contextData.params.id=t.get("photo").getValue("owner").getValue("nsid"),t.loadState();throw e}).then(null,function(e){throw t.appContext.warn("There was a problem loading the context slider data.",e&&e.message?e.message:e,e&&e.stack?e.stack:""),e})},assignContextPositionsAndAddToDOM:function(e){var t=this.get("container"),n=t.one(".small-slider .slider"),r=t.one(".big-slider .slider"),i=e.contextResponse,s,o,u;for(u=0;u<i.previous.length;u++)o=-1-u,typeof this.photosInSlider[o]=="undefined"&&(s=i.previous[u].toJSON(),this.photosInSlider[o]=i.previous[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.previous[u]),s.url=this.getContextifiedURLForPhoto(i.previous[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)));for(u=0;u<i.next.length;u++)o=1+u,typeof this.photosInSlider[o]=="undefined"&&(s=i.next[u].toJSON(),this.photosInSlider[o]=i.next[u].getValue("id"),s.left=o*this.photoWidthPlusMarginSmall,s.background=this.getBackgroundImage(i.next[u]),s.url=this.getContextifiedURLForPhoto(i.next[u]),n.append(this.templates("context-slider-photo")(s)),s.left=o*this.photoWidthPlusMargin,r.append(this.templates("context-slider-photo")(s)))},checkBoundary:function(e){var t=e.contextResponse,n=e.requestedPreviousAmount,r=e.requestedNextAmount,i=e.positionWhenChecking,s=this.get("contextModel").getValue("photoContextList"),o=this.get("container"),u=o.one(".nav-l"),a=o.one(".nav-r");this.currentPosition-this.numberOfPhotosEitherSideInViewPort>this.positionsLoadedNext&&this.move(-Math.abs(this.currentPosition-this.positionsLoadedNext)),this.currentPosition<0&&Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)>this.positionsLoadedPrev&&this.move(Math.abs(this.currentPosition+this.numberOfPhotosEitherSideInViewPort)-this.positionsLoadedPrev),s.hasMinBoundary()&&t.previous.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&n>0&&(u.hide(),this.atStart=!0),s.hasMaxBoundary()&&t.next.length-Math.abs(i)<=this.numberOfPhotosEitherSideInViewPort&&r>0&&(a.hide(),this.atEnd=!0)},buildContainer:function(){function f(t,i,s,o,u){t>3&&(t=3);for(var a=0;a<t;a++){var f=n[i][a],l=f.toJSON();l.background=r.getBackgroundImage(f),l.left=(a+1)*r.photoWidthPlusMarginSmall*o,l.currentPhoto=!1,l.url=r.getContextifiedURLForPhoto(f),s.push(l),r.photosInSlider[""+(a+1)*o]=l;var c=e.clone(l);c.left=c.left/r.photoWidthPlusMarginSmall*r.photoWidthPlusMargin,u.push(c)}}var t=this.get("photo").toJSON(),n=this.get("initialContextResponse"),r=this,i;t.background=this.getBackgroundImage(this.get("photo")),t.left=0,t.currentPhoto=!0,t.url=this.getContextifiedURLForPhoto(this.get("photo"));var s=[],o=[],u=[],a=[];this.positionsLoadedNext>0&&f(this.positionsLoadedNext,"next",s,1,a),this.positionsLoadedPrev>0&&f(this.positionsLoadedPrev,"previous",o,-1,u),i=this.templates("context-slider-scrappy")({previousPhotos:o,nextPhotos:s,previousBigPhotos:u,nextBigPhotos:a,currentPhoto:[t],slideshowEnabled:this.appContext.flipper.isFlipped("enable-slideshow"),"is-ad":this.isAd,showBigSlider:!this.appContext.isJavaScriptDisabled}),this.isAd&&(n.next.pop(),n.next=[this.get("photo")].concat(n.next)),this.setContainerHTML(i)},buildErrorContainer:function(){this.setContainerHTML(this.templates("context-slider-scrappy")({loadingError:!0}))},activate:function(){var t=this,n=t.get("container"),r=!1,i,s,o=this.appContext.getViewer().prefs.keyboardShortcutsEnabled,u=this.numberOfPhotosEitherSideInViewPort;return this.assignContextPositionsAndAddToDOM({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:u,requestedNextAmount
:u}),this.checkBoundary({contextResponse:this.get("initialContextResponse"),requestedPreviousAmount:u,requestedNextAmount:u,positionWhenChecking:this.currentPosition}),e.StorageHelper.getItem("showBigContextSlider")==="true"?(n.addClass("hover"),setTimeout(function(){n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")},300)):(n.setStyle("transition","opacity 300ms ease-out, background-position 150ms ease-out"),n.all(".context-slider").setStyle("transition","opacity 300ms ease-out")),this.appContext.flipper.isFlipped("enable-slideshow")&&(this.slideshowInProgress&&this.startSlideshow(),this.registerEventHandler(this.get("container").all(".currentImage").on("click",function(e){e.preventDefault(),t.slideshowInProgress?t.stopSlideshow():t.startSlideshow()}))),e.use("transition",function(e){t.registerEventHandler(t.get("container").one(".nav-l").on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveLeftClick"),t.move(-1*t.numberOfPositionsToMove)})),t.registerEventHandler(t.get("container").one(".nav-r").on("click",function(){n.setStyle("transition","opacity 300ms ease-out"),e.rapidTracker.beacon(t.name,"contextSliderMoveRightClick"),t.move(1*t.numberOfPositionsToMove)})),o&&(t.attachKeyEvent("down:188",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveLeftKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atStart||t.move(-1*t.numberOfPositionsToMove)},20)),t.attachKeyEvent("down:190",e.betterThrottle(function(r){e.rapidTracker.beacon(t.name,"contextSliderMoveRightKeyPress"),n.addClass("hover"),t.bringIntoFocus(),t.atEnd||t.move(1*t.numberOfPositionsToMove)},20))),t.registerEventHandler(n.on("hover",function(){r=!0,clearTimeout(i),i=setTimeout(function(){r&&n.addClass("hover")},150)},function(){r=!1,clearTimeout(s),e.StorageHelper.setItem("showBigContextSlider","false"),s=setTimeout(function(){r||(n.setStyles({width:"100%",height:"80px"}),n.removeClass("hover"),setTimeout(function(){n.removeAttribute("style")},300))},500)})),t.registerEventHandler(n.all(".context-thumb:not(.currentImage)").on("click",function(){e.StorageHelper.setItem("showBigContextSlider","true")}))}),this},startSlideshow:function(){function s(){if(r===0&&t.slideshowInProgress){t.appContext.flapp.navigate(n);return}i.all(".currentImage .countdown-slideshow").set("text",r),r-=1}this.slideshowInProgress=!0;var t=this,n=this.getContextifiedURLForPhoto(this.get("initialContextResponse").next[0]),r=this.slideshowDwellSeconds,i=this.get("container");e.StorageHelper.setItem("slideshowInProgress","true"),i.all(".currentImage .play-slideshow").hide(),s(),this.slideshowTimer=setInterval(function(){s()},1e3)},stopSlideshow:function(){this.slideshowInProgress=!1,this.get("container").all(".currentImage .countdown-slideshow").set("text",""),this.get("container").all(".currentImage .play-slideshow").show(),clearInterval(this.slideshowTimer),e.StorageHelper.setItem("slideshowInProgress","false")},move:function(t){var n=this,r=this.get("contextModel").getValue("photoContextList"),i=t>0?"right":"left",s=this.get("container"),o=s.one(".big-slider .slider"),u=s.one(".small-slider .slider"),a,f,l,c,h,p=s.one(".nav-l"),d=s.one(".nav-r"),v;if(i==="right"&&this.currentPosition-this.positionsLoadedNext>this.positionsAheadLimit)return!1;if(i==="left"&&this.currentPosition<=0&&Math.abs(this.currentPosition)-this.positionsLoadedPrev>this.positionsAheadLimit)return!1;s.addClass("hover"),this.currentPosition+=t,v=this.currentPosition,typeof this.photosInSlider[this.currentPosition+this.numberOfPhotosEitherSideInViewPort+1]!="undefined"&&(d.show(),this.atEnd=!1),typeof this.photosInSlider[this.currentPosition-(this.numberOfPhotosEitherSideInViewPort+1)]!="undefined"&&(p.show(),this.atStart=!1),a=this.currentPosition*this.photoWidthPlusMargin*-1,f=this.currentPosition*this.photoWidthPlusMarginSmall*-1,o.transition({left:a+"px",duration:.3,easing:"ease-out"}),u.setStyle("left",f+"px"),i==="right"?c=this.currentPosition+this.numberOfPositionsToMove+this.numberOfPositionsToBuffer:i==="left"&&(c=this.currentPosition-(this.numberOfPositionsToMove+this.numberOfPositionsToBuffer)),l=typeof this.photosInSlider[c]=="undefined",l&&(h=e.merge(n.contextData.params,{photoId:this.get("photo").getValue("id"),refetchAt:this.numberOfPositionsToRefetchAt}),i==="right"?h.numNext=Math.abs(c)+this.numberOfPositionsToPreFetch:i==="left"&&(h.numPrev=Math.abs(c)+this.numberOfPositionsToPreFetch),r.getContext(h).then(function(e){n.positionsLoadedNext=typeof h.numNext!="undefined"?h.numNext:n.positionsLoadedNext,n.positionsLoadedPrev=typeof h.numPrev!="undefined"?h.numPrev:n.positionsLoadedPrev,n.assignContextPositionsAndAddToDOM({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext}),n.checkBoundary({contextResponse:e,requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})},function(e){n.checkBoundary({contextResponse:{previous:[],next:[]},requestedPreviousAmount:h.numPrev,requestedNextAmount:h.numNext,positionWhenChecking:v})}))},getBackgroundImage:function(e){var t,n=this.appContext.getViewer().getPixelRatio(),r;return t={width:this.photoWidth*n,height:this.photoWidth*n},r={cropToFit:!0,includeSizes:["sq","t","q","s","n"]},e.getSizeToFit(t,r).url},getContextifiedURLForPhoto:function(t){if(t){var n=e.URLHelper.getPhotoPage({photoId:t.getValue("id"),pathAlias:t.getValue("owner").getValue("pathAlias"),contextSuffix:this.get("contextModel").getValue("urlSuffix")});return n}},beforeDestroy:function(){clearInterval(this.slideshowTimer)}})},"@VERSION@",{requires:["flickr-view","hermes-template-context-slider-scrappy","hermes-template-context-slider-photo","hermes-template-context-image","hermes-template-context-text","context-slider-scrappy-css","storage-helper"],optional:[],langBundles:["common","photo-page-scrappy"]});
YUI.add("hermes-template-photo-engagement",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var r="",i;r+='\n	<div class="wallart',i=n["if"].call(e,e.isWallartLowQuality,{hash:{},inverse:f.noop,fn:f.program(2,d,t),data:t});if(i||i===0)r+=i;return r+='">\n		<a href="#" title="Create wall art with this photo">\n			<i class="ui-icon-wallart"></i>\n		</a>\n	</div>\n',r}function d(e,t){return" dimmed"}function v(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["photo-well-scrappy-edit-view"],s):l.call(e,"outlet",e["photo-well-scrappy-edit-view"],s)))+"\n",r}function m(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e["fave-view"],s):l.call(e,"outlet",e["fave-view"],s)))+"\n",r}function g(e,t){var r="",i,s;return r+="\n	",s={hash:{},data:t},r+=c((i=n.outlet||e.outlet,i?i.call(e,e.shareView,s):l.call(e,"outlet",e.shareView,s)))+"\n",r}function y(e,t){var r="",i,s;return r+='\n	<div class=\'share\'>\n		<a href="#" title="',s={hash:{intlName:"photo-page-scrappy.SHARE_THIS_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n			<i class="ui-icon-share-24"></i>\n		</a>\n	</div>\n',r}function b(e,t){var r="",i,s;return r+='\n		<a href="/video_download.gne?id=',(i=n.photoId)?i=i.call(e,{hash:{},data:t}):(i=e.photoId,i=typeof i===h?i.apply(e):i),r+=c(i)+'" class="server-only-link" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_VIDEO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function w(e,t){var r="",i,s;return r+='\n		<a href="',(i=n.downloadLink)?i=i.call(e,{hash:{},data:t}):(i=e.downloadLink,i=typeof i===h?i.apply(e):i),r+=c(i)+'" title="',s={hash:{intlName:"photo-page-scrappy.DOWNLOAD_THIS_PHOTO"},data:t},r+=c((i=n.intlMessage||e.intlMessage,i?i.call(e,s):l.call(e,"intlMessage",s)))+'">\n	',r}function E(e,t){var r="",i,s;return r+='\n		<div class="display-obscured-download-sizes">\n			',s={hash:{},data:t},r+=c((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.downloadItems,s):l.call(e,"renderTrustedMarkup",e.downloadItems,s)))+"\n		</div>\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=this,l=n.helperMissing,c=this.escapeExpression,h="function";o=n["if"].call(t,t.canCreateWallart,{hash:{},inverse:f.noop,fn:f.program(1,p,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.viewerIsOwner,{hash:{},inverse:f.program(6,m,i),fn:f.program(4,v,i),data:i});if(o||o===0)s+=o;s+="\n\n",a={hash:{},inverse:f.noop,fn:f.program(8,g,i),data:i},u=(o=n.isFlipped||t.isFlipped,o?o.call(t,t.flippers,"rebootify-photo-page-sharing",a):l.call(t,"isFlipped",t.flippers,"rebootify-photo-page-sharing",a));if(u||u===0)s+=u;s+="\n",a={hash:{},inverse:f.noop,fn:f.program(10,y,i),data:i},u=(o=n.isNotFlipped||t.isNotFlipped,o?o.call(t,t.flippers,"rebootify-photo-page-sharing",a):l.call(t,"isNotFlipped",t.flippers,"rebootify-photo-page-sharing",a));if(u||u===0)s+=u;s+="\n\n<div class='download'>\n	",u=n["if"].call(t,t.isVideo,{hash:{},inverse:f.program(14,w,i),fn:f.program(12,b,i),data:i});if(u||u===0)s+=u;s+='\n\n			<i class="ui-icon-download"></i>\n		</a>\n\n	',u=n["if"].call(t,t.downloadItems,{hash:{},inverse:f.noop,fn:f.program(16,E,i),data:i});if(u||u===0)s+=u;return s+="\n\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/photo-engagement",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-download-dialog",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){var n="",r;return n+='\n			"'+l((r=(r=e.photo,r==null||r===!1?r:r.title),typeof r===f?r.apply(e):r))+'"\n		',n}function d(e,t){var n="",r;return n+='\n            <i class="ui-icon-tiny-'+l((r=(r=e.photo,r==null||r===!1?r:r.license),typeof r===f?r.apply(e):r))+'cc"></i>\n        ',n}function v(e,t){return'\n            <i class="ui-icon-tiny-government"></i>\n        '}function m(e,t){return'\n            <i class="ui-icon-tiny-noKnown"></i>\n        '}function g(e,t){return'\n			<i class="ui-icon-tiny-copyright">&nbsp;</i>\n		'}function y(e,t){var r="",i,s;return r+='\n		    <span class="license license-'+l((i=(i=e.photo,i==null||i===!1?i:i.license),typeof i===f?i.apply(e):i))+'">',s={hash:{intlName:"photo-page-scrappy.SOME_RIGHTS_RESERVED"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):c.call(e,"intlMessage",s)))+"</span>\n		",r}function b(e,t){var r="",i,s;return r+='\n		    <span class="license license-'+l((i=(i=e.photo,i==null||i===!1?i:i.license),typeof i===f?i.apply(e):i))+'">',s={hash:{},data:t},r+=l((i=n.licenseString||e.licenseString,i?i.call(e,(i=e.photo,i==null||i===!1?i:i.license),s):c.call(e,"licenseString",(i=e.photo,i==null||i===!1?i:i.license),s)))+"</span>\n		",r}function w(e,t){var r="",i;r+='\n			<li class="',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===f?i.apply(e):i),r+=l(i),i=n["if"].call(e,e.selected,{hash:{},inverse:h.noop,fn:h.program(16,E,t),data:t});if(i||i===0)r+=i;return r+='">\n				<a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===f?i.apply(e):i),r+=l(i)+'" data-track="downloadSizeSelected',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===f?i.apply(e):i),r+=l(i)+'">\n					<span class="label">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===f?i.apply(e):i),r+=l(i)+'</span>\n					<span class="resolution">',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===f?i.apply(e):i),r+=l(i)+" &times; ",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===f?i.apply(e):i),r+=l(i)+"</span>\n				</a>\n			</li>\n		",r}function E(e,t){return" selected"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f="function",l=this.escapeExpression,c=n.helperMissing,h=this;s+='<div class="download-dialog">\n	<h2>',a={hash:{intlName:"photo-page-scrappy.DOWNLOAD_PHOTO"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):c.call(t,"intlMessage",a)))+'</h2>\n	<p class="title">\n		',u=n["if"].call(t,(o=t.photo,o==null||o===!1?o:o.title),{hash:{},inverse:h.noop,fn:h.program(1,p,i),data:i});if(u||u===0)s+=u;s+="\n		by "+l((o=(o=(o=t.photo,o==null||o===!1?o:o.owner),o==null||o===!1?o:o.displayname),typeof o===f?o.apply(t):o))+'\n	</p>\n	<p class="license-info">\n	<a href="',a={hash:{},data:i},s+=l((o=n.configVal||t.configVal,o?o.call(t,"licenseUrls",(o=t.photo,o==null||o===!1?o:o.license),a):c.call(t,"configVal","licenseUrls",(o=t.photo,o==null||o===!1?o:o.license),a)))+'" class="license-url" target="_newtab">\n        ',u=n["if"].call(t,t.licenseIsCreativeCommons,{hash:{},inverse:h.noop,fn:h.program(3,d,i),data:i});if(u||u===0)s+=u;s+="\n        ",u=n["if"].call(t,t.licenseisGovt,{hash:{},inverse:h.noop,fn:h.program(5,v,i),data:i});if(u||u===0)s+=u;s+="\n        ",u=n["if"].call(t,t.licenseisNoLic,{hash:{},inverse:h.noop,fn:h.program(7,m,i),data:i});if(u||u===0)s+=u;s+="\n        ",u=n["if"].call(t,t.licenseisCopy,{hash:{},inverse:h.noop,fn:h.program(9,g,i),data:i});if(u||u===0)s+=u;s+="\n		",u=n["if"].call(t,t.licenseIsCreativeCommons,{hash:{},inverse:h.program(13,b,i),fn:h.program(11,y,i),data:i});if(u||u===0)s+=u;s+='\n	</a>\n    </p>\n	<ul class="sizes">\n		',u=n.each.call(t,t.sizes,{hash:{},inverse:h.noop,fn:h.program(15,w,i),data:i});if(u||u===0)s+=u;return s+="\n	</ul>\n	<p class='buttons'>\n		<a href=\""+l((o=(o=t.photo,o==null||o===!1?o:o.url),typeof o===f?o.apply(t):o))+'/sizes/l" class="all-sizes" data-track="viewAllSizesClick">',a={hash:{intlName:"photo-page-scrappy.VIEW_ALL_SIZES"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):c.call(t,"intlMessage",a)))+'</a>\n		<button class="ui-dialog-button ui-dialog-button-neutral ui-dialog-button-done" data-track="downloadClick"><span>',a={hash:{intlName:"photo-page-scrappy.DOWNLOAD"},data:i},s+=l((o=n.intlMessage||t.intlMessage,o?o.call(t,a):c.call(t,"intlMessage",a)))+'</span></button>\n	</p>\n	<button class="ui-dialog-button ui-dialog-button-neutral ui-dialog-button-close hide-text"><span>&nbsp;</span></button>\n</div>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/download-dialog",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-scrappy-download-menu",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="\n        ",i=n.each.call(e,e.sizes,{hash:{},inverse:l.noop,fn:l.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function p(e,t){var r="",i;return r+='\n		    <li class="',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+'">\n			    <a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===a?i.apply(e):i),r+=f(i)+'" data-track="downloadSizeSelected',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+'" class="download-image-size">\n				    <span class="label">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===a?i.apply(e):i),r+=f(i)+'</span>\n				    <span class="resolution">(',(i=n.width)?i=i.call(e,{hash:{},data:t}):(i=e.width,i=typeof i===a?i.apply(e):i),r+=f(i)+" &times; ",(i=n.height)?i=i.call(e,{hash:{},data:t}):(i=e.height,i=typeof i===a?i.apply(e):i),r+=f(i)+")</span>\n			    </a>\n		    </li>\n	    ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+='<ul class="sizes">\n    ',o=n["if"].call(t,t.showDownloadSizes,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+='\n	<li><a href="'+f((o=(o=t.photo,o==null||o===!1?o:o.url),typeof o===a?o.apply(t):o))+'/sizes/l" class="all-sizes server-only-link" data-track="viewAllSizesClick">',u={hash:{intlName:"photo-page-scrappy.VIEW_ALL_SIZES"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):c.call(t,"intlMessage",u)))+"</a></li>\n</ul>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/scrappy-download-menu",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("wallart-helper",function(e){"use strict";e.WallartHelper=function(e){this.validWallartTypes=["canvas","mounted"],this.appContext=e,this.dimensions=[{canvas:{FLICKR_2_1:[975,825,750,600,693,543,28.5,28.5,112.5,112.5,75,75],FLICKR_2_3:[1125,1125,900,900,1050,1050,75,75,150,150,75,75],FLICKR_2_2:[1275,1050,1050,825,1250,950,75,75,150,150,75,75],FLICKR_2_4:[1725,1425,1500,1200,1850,1450,75,75,150,150,75,75],FLICKR_2_5:[2025,1725,1800,1500,2250,1850,75,75,150,150,75,75],FLICKR_2_6:[2475,1725,2250,1500,2850,1850,75,75,150,150,75,75]},mounted:{FLICKR_2_9:[1e3,800,974.666,774.666,950.668,750.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_1:[1e3,800,974.666,774.666,950.668,750.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_2:[1e3,800,974.666,774.666,950.668,750.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_3:[1e3,800,974.666,774.666,950.668,750.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_11:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_1:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_2:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_3:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10:[1400,1100,1375.334,1075.334,1367.112,1067.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_1:[1400,1100,1375.334,1075.334,1367.112,1067.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_2:[1400,1100,1375.334,1075.334,1367.112,1067.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_3:[1400,1100,1375.334,1075.334,1367.112,1067.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12:[2e3,1600,1975.334,1575.334,1967.112,1567.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_1:[2e3,1600,1975.334,1575.334,1967.112,1567.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_2:[2e3,1600,1975.334,1575.334,1967.112,1567.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_3:[2e3,1600,1975.334,1575.334,1967.112,1567.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13:[3e3,2e3,2975.334,1975.334,2967.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_1:[3e3,2e3,2975.334,1975.334,2967.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_2:[3e3,2e3,2975.334,1975.334,2967.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_3:[3e3,2e3,2975.334,1975.334,2967.112,1967.112,4.111,4.111,12.333,12.333,100,100]}},{canvas:{FLICKR_2_1:[825,975,600,750,543,693,28.5,28.5,112.5,112.5,75,75],FLICKR_2_3:[1125,1125,900,900,1050,1050,75,75,150,150,75,75],FLICKR_2_2:[1050,1275,825,1050,950,1250,75,75,150,150,75,75],FLICKR_2_4:[1425,1725,1200,1500,1450,1850,75,75,150,150,75,75],FLICKR_2_5:[1725,2025,1500,1800,1850,2250,75,75,150,150,75,75],FLICKR_2_6:[1725,2475,1500,2250,1850,2850,75,75,150,150,75,75]},mounted:{FLICKR_2_9:[800,1e3,774.666,974.666,750.668,950.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_1:[800,1e3,774.666,974.666,750.668,950.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_2:[800,1e3,774.666,974.666,750.668,950.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_9_3:[800,1e3,774.666,974.666,750.668,950.668,12.667,12.667,12.667,12.667,100,100],FLICKR_2_11:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_1:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_2:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_11_3:[1200,1200,1175.334,1175.334,1167.112,1167.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10:[1100,1400,1075.334,1375.334,1067.112,1367.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_1:[1100,1400,1075.334,1375.334,1067.112,1367.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_2:[1100,1400,1075.334,1375.334,1067.112,1367.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_10_3:[1100,1400,1075.334,1375.334,1067.112,1367.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12:[1600,2e3,1575.334,1975.334,1567.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_1:[1600,2e3,1575.334,1975.334,1567.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_2:[1600,2e3,1575.334,1975.334,1567.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_12_3:[1600,2e3,1575.334,1975.334,1567.112,1967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13:[2e3,3e3,1975.334,2975.334,1967.112,2967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_1:[2e3,3e3,1975.334,2975.334,1967.112,2967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_2:[2e3,3e3,1975.334,2975.334,1967.112,2967.112,4.111,4.111,12.333,12.333,100,100],FLICKR_2_13_3:[2e3,3e3,1975.334,2975.334,1967.112,2967.112,4.111,4.111,12.333,12.333,100,100]}}]},e.WallartHelper.prototype.getNewSku=function(e,t){var n,r,i=e.slice(e.length-1);if(t.size){["FLICKR_2_1","FLICKR_2_3","FLICKR_2_2","FLICKR_2_4","FLICKR_2_5","FLICKR_2_6"].indexOf(e)>-1?r="canvas":["FLICKR_2_9","FLICKR_2_11","FLICKR_2_10","FLICKR_2_12","FLICKR_2_13"].indexOf(e)>-1?r="mounted":["FLICKR_2_9_1","FLICKR_2_11_1","FLICKR_2_10_1","FLICKR_2_12_1","FLICKR_2_13_1"].indexOf(e)>-1?r="mounted":["FLICKR_2_9_2","FLICKR_2_11_2","FLICKR_2_10_2","FLICKR_2_12_2","FLICKR_2_13_2"].indexOf(e)>-1?r="mounted":["FLICKR_2_9_3","FLICKR_2_11_3","FLICKR_2_10_3","FLICKR_2_12_3","FLICKR_2_13_3"].indexOf(e)>-1&&(r="mounted");switch(t.size){case"8x10":case"10x8":r==="canvas"?n="FLICKR_2_1":r==="mounted"&&(n="FLICKR_2_9",this.appContext.flipper.isFlipped("wallart-papertypes")&&(this.convertSkuTo(e,"type")==="mounted"?["1","2","3"].indexOf(i)>-1?n+="_"+i:n+="_1":n+="_1"));break;case"12x12":r==="canvas"?n="FLICKR_2_3":r==="mounted"&&(n="FLICKR_2_11",this.appContext.flipper.isFlipped("wallart-papertypes")&&(this.convertSkuTo(e,"type")==="mounted"?["1","2","3"].indexOf(i)>-1?n+="_"+i:n+="_1":n+="_1"));break;case"11x14":case"14x11":r==="canvas"?n="FLICKR_2_2":r==="mounted"&&(n="FLICKR_2_10",this.appContext.flipper.isFlipped("wallart-papertypes")&&(this.convertSkuTo(e,"type")==="mounted"?["1","2"
,"3"].indexOf(i)>-1?n+="_"+i:n+="_1":n+="_1"));break;case"16x20":case"20x16":r==="canvas"?n="FLICKR_2_4":r==="mounted"&&(n="FLICKR_2_12",this.appContext.flipper.isFlipped("wallart-papertypes")&&(this.convertSkuTo(e,"type")==="mounted"?["1","2","3"].indexOf(i)>-1?n+="_"+i:n+="_1":n+="_1"));break;case"20x24":case"24x20":r==="canvas"&&(n="FLICKR_2_5");break;case"20x30":case"30x20":r==="canvas"?n="FLICKR_2_6":r==="mounted"&&(n="FLICKR_2_13",this.appContext.flipper.isFlipped("wallart-papertypes")&&(this.convertSkuTo(e,"type")==="mounted"?["1","2","3"].indexOf(i)>-1?n+="_"+i:n+="_1":n+="_1"))}}if(t.style)switch(t.style){case"canvas":if(e==="FLICKR_2_9"||e==="FLICKR_2_9_1"||e==="FLICKR_2_9_2"||e==="FLICKR_2_9_3")n="FLICKR_2_1";else if(e==="FLICKR_2_11"||e==="FLICKR_2_11_1"||e==="FLICKR_2_11_2"||e==="FLICKR_2_11_3")n="FLICKR_2_3";else if(e==="FLICKR_2_10"||e==="FLICKR_2_10_1"||e==="FLICKR_2_10_2"||e==="FLICKR_2_10_3")n="FLICKR_2_2";else if(e==="FLICKR_2_12"||e==="FLICKR_2_12_1"||e==="FLICKR_2_12_2"||e==="FLICKR_2_12_3")n="FLICKR_2_4";else if(e==="FLICKR_2_13"||e==="FLICKR_2_13_1"||e==="FLICKR_2_13_2"||e==="FLICKR_2_13_3")n="FLICKR_2_6";break;case"mounted":e==="FLICKR_2_1"?(n="FLICKR_2_9",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1")):e==="FLICKR_2_3"?(n="FLICKR_2_11",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1")):e==="FLICKR_2_2"?(n="FLICKR_2_10",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1")):e==="FLICKR_2_4"?(n="FLICKR_2_12",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1")):e==="FLICKR_2_5"?(n="FLICKR_2_12",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1")):e==="FLICKR_2_6"&&(n="FLICKR_2_13",this.appContext.flipper.isFlipped("wallart-papertypes")&&(n+="_1"))}if(t.material)switch(t.material){case"lustre":if(e==="FLICKR_2_9"||e==="FLICKR_2_9_1"||e==="FLICKR_2_9_2"||e==="FLICKR_2_9_3")n="FLICKR_2_9_1";else if(e==="FLICKR_2_11"||e==="FLICKR_2_11_1"||e==="FLICKR_2_11_2"||e==="FLICKR_2_11_3")n="FLICKR_2_11_1";else if(e==="FLICKR_2_10"||e==="FLICKR_2_10_1"||e==="FLICKR_2_10_2"||e==="FLICKR_2_10_3")n="FLICKR_2_10_1";else if(e==="FLICKR_2_12"||e==="FLICKR_2_12_1"||e==="FLICKR_2_12_2"||e==="FLICKR_2_12_3")n="FLICKR_2_12_1";else if(e==="FLICKR_2_13"||e==="FLICKR_2_13_1"||e==="FLICKR_2_13_2"||e==="FLICKR_2_13_3")n="FLICKR_2_13_1";break;case"glossy":if(e==="FLICKR_2_9"||e==="FLICKR_2_9_1"||e==="FLICKR_2_9_2"||e==="FLICKR_2_9_3")n="FLICKR_2_9_2";else if(e==="FLICKR_2_11"||e==="FLICKR_2_11_1"||e==="FLICKR_2_11_2"||e==="FLICKR_2_11_3")n="FLICKR_2_11_2";else if(e==="FLICKR_2_10"||e==="FLICKR_2_10_1"||e==="FLICKR_2_10_2"||e==="FLICKR_2_10_3")n="FLICKR_2_10_2";else if(e==="FLICKR_2_12"||e==="FLICKR_2_12_1"||e==="FLICKR_2_12_2"||e==="FLICKR_2_12_3")n="FLICKR_2_12_2";else if(e==="FLICKR_2_13"||e==="FLICKR_2_13_1"||e==="FLICKR_2_13_2"||e==="FLICKR_2_13_3")n="FLICKR_2_13_2";break;case"matte":if(e==="FLICKR_2_9"||e==="FLICKR_2_9_1"||e==="FLICKR_2_9_2"||e==="FLICKR_2_9_3")n="FLICKR_2_9_3";else if(e==="FLICKR_2_11"||e==="FLICKR_2_11_1"||e==="FLICKR_2_11_2"||e==="FLICKR_2_11_3")n="FLICKR_2_11_3";else if(e==="FLICKR_2_10"||e==="FLICKR_2_10_1"||e==="FLICKR_2_10_2"||e==="FLICKR_2_10_3")n="FLICKR_2_10_3";else if(e==="FLICKR_2_12"||e==="FLICKR_2_12_1"||e==="FLICKR_2_12_2"||e==="FLICKR_2_12_3")n="FLICKR_2_12_3";else if(e==="FLICKR_2_13"||e==="FLICKR_2_13_1"||e==="FLICKR_2_13_2"||e==="FLICKR_2_13_3")n="FLICKR_2_13_3"}return n},e.WallartHelper.prototype.getArtDimensions=function(e,t){var n={renderedWidth:0,renderedHeight:1,shownWidth:2,shownHeight:3,guarenteedWidth:4,guarenteeHeight:5,safetyWidth:6,safetyHeight:7,bleedWidth:8,bleedHeight:9,optimumDPI:10,minimumDPI:11},r,i=[];r=this.dimensions;switch(e){case"FLICKR_2_1":i=r[t].canvas.FLICKR_2_1;break;case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_9_2":case"FLICKR_2_9_3":i=r[t].mounted.FLICKR_2_9;break;case"FLICKR_2_3":i=r[t].canvas.FLICKR_2_3;break;case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_11_2":case"FLICKR_2_11_3":i=r[t].mounted.FLICKR_2_11;break;case"FLICKR_2_2":i=r[t].canvas.FLICKR_2_2;break;case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_10_2":case"FLICKR_2_10_3":i=r[t].mounted.FLICKR_2_10;break;case"FLICKR_2_4":i=r[t].canvas.FLICKR_2_4;break;case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_12_2":case"FLICKR_2_12_3":i=r[t].mounted.FLICKR_2_12;break;case"FLICKR_2_5":i=r[t].canvas.FLICKR_2_5;break;case"FLICKR_2_6":i=r[t].canvas.FLICKR_2_6;break;case"FLICKR_2_13":case"FLICKR_2_13_1":case"FLICKR_2_13_2":case"FLICKR_2_13_3":i=r[t].mounted.FLICKR_2_13}return{map:n,dimensions:i}},e.WallartHelper.prototype.isCC=function(e){return e.getValue("photoSource")===2?!0:!1},e.WallartHelper.prototype.isMK=function(e){return e.getValue("photoSource")===3?!0:!1},e.WallartHelper.prototype.getCorrectedLargestSize=function(e){var t,n,r;return e.getValue("oWidth")&&e.getValue("oHeight")?t={width:e.getValue("oWidth"),height:e.getValue("oHeight")}:t=e.getLargestSize({excludeSizes:[]}),r={width:t.width,height:t.height},n=e.getValue("rotation"),Math.abs(n)%180!==0&&(t.width=r.height,t.height=r.width),t},e.WallartHelper.prototype.getInitialSku=function(e,t){var n,r,i=["FLICKR_2_4","FLICKR_2_12_1","FLICKR_2_12_2","FLICKR_2_12_3"],s;return this.wallartModel=e,e.getValue("photo").getValue("oWidth")&&e.getValue("photo").getValue("oHeight")?s={width:e.getValue("photo").getValue("oWidth"),height:e.getValue("photo").getValue("oHeight")}:s=this.getCorrectedLargestSize(e.getValue("photo")),s.width>=s.height?r=0:r=1,e.setValue("isCC",this.isCC(e)),e.setValue("isMK",this.isMK(e)),n=this.getLargestSizeWallartSku(s,r,t,i),t==="mounted"&&n.match(/(FLICKR_)[0-9]{1,2}_[0-9]{1,2}_[0-9]{1,2}/g)&&(n=n.slice(0,-1)+"1"),{sku:n,orientation:r}},e.WallartHelper.prototype.getLargestSizeWallartSku=function(e,t,n,r){var i,s,o,u=!1;s=this.dimensions,r||(r=[]);for(o in s[t][n]){if(e.width>=s[t][n][o][0]&&e.height>=s[t][n][o][1]){this.appContext.flipper.isFlipped("wallart-papertypes")?i=o:i?o.indexOf(i)===-1&&(i=o):i=
o;if(r.indexOf(o)>-1)break;continue}if(!i){u=!0;break}break}if(u){u=!1;for(o in s[t].canvas){if(!(e.width>=s[t].canvas[o][0]&&e.height>=s[t].canvas[o][1])){i||(i=o);break}i=o}}return i},e.WallartHelper.prototype.convertSkuTo=function(e,t,n){var r;n||(n=0);if(t==="size")switch(e){case"FLICKR_2_1":case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_9_2":case"FLICKR_2_9_3":n===0?r="8x10":n===1&&(r="10x8");break;case"FLICKR_2_3":case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_11_2":case"FLICKR_2_11_3":r="12x12";break;case"FLICKR_2_2":case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_10_2":case"FLICKR_2_10_3":n===0?r="11x14":n===1&&(r="14x11");break;case"FLICKR_2_4":case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_12_2":case"FLICKR_2_12_3":n===0?r="16x20":n===1&&(r="20x16");break;case"FLICKR_2_5":n===0?r="20x24":n===1&&(r="24x20");break;case"FLICKR_2_6":case"FLICKR_2_13":case"FLICKR_2_13_1":case"FLICKR_2_13_2":case"FLICKR_2_13_3":n===0?r="20x30":n===1&&(r="30x20")}else if(t==="size-copy")switch(e){case"FLICKR_2_1":case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_9_2":case"FLICKR_2_9_3":n===0?r='8" x 10"':n===1&&(r='10" x 8"');break;case"FLICKR_2_3":case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_11_2":case"FLICKR_2_11_3":r='12" x 12"';break;case"FLICKR_2_2":case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_10_2":case"FLICKR_2_10_3":n===0?r='11" x 14"':n===1&&(r='14" x 11"');break;case"FLICKR_2_4":case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_12_2":case"FLICKR_2_12_3":n===0?r='16" x 20"':n===1&&(r='20" x 16"');break;case"FLICKR_2_5":n===0?r='20" x 24"':n===1&&(r='24" x 20"');break;case"FLICKR_2_6":case"FLICKR_2_13":case"FLICKR_2_13_1":case"FLICKR_2_13_2":case"FLICKR_2_13_3":n===0?r='20" x 30"':n===1&&(r='30" x 20"')}else if(t==="type")switch(e){case"FLICKR_2_1":case"FLICKR_2_3":case"FLICKR_2_2":case"FLICKR_2_4":case"FLICKR_2_5":case"FLICKR_2_6":r="canvas";break;case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_9_2":case"FLICKR_2_9_3":case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_11_2":case"FLICKR_2_11_3":case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_10_2":case"FLICKR_2_10_3":case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_12_2":case"FLICKR_2_12_3":case"FLICKR_2_13":case"FLICKR_2_13_1":case"FLICKR_2_13_2":case"FLICKR_2_13_3":r="mounted"}else if(t==="product-description")switch(e){case"FLICKR_2_1":r={title:"wallart.CANVAS_WRAP",description:["","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8");break;case"FLICKR_2_3":r={title:"wallart.CANVAS_WRAP",description:["wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]};break;case"FLICKR_2_2":r={title:"wallart.CANVAS_WRAP",description:["","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11");break;case"FLICKR_2_4":r={title:"wallart.CANVAS_WRAP",description:["","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16");break;case"FLICKR_2_5":r={title:"wallart.CANVAS_WRAP",description:["","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20");break;case"FLICKR_2_6":r={title:"wallart.CANVAS_WRAP",description:["","wallart.PRODUCT_DESCRIPTION_CANVAS_PART_2"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20");break;case"FLICKR_2_9":case"FLICKR_2_9_1":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8");break;case"FLICKR_2_9_2":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8");break;case"FLICKR_2_9_3":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8");break;case"FLICKR_2_10":case"FLICKR_2_10_1":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11");break;case"FLICKR_2_10_2":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11");break;case"FLICKR_2_10_3":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11");break;case"FLICKR_2_11":case"FLICKR_2_11_1":r={title:"wallart.PHOTO_MOUNT",description:["wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE"]};break;case"FLICKR_2_11_2":r={title:"wallart.PHOTO_MOUNT",description:["wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY"]};break;case"FLICKR_2_11_3":r={title:"wallart.PHOTO_MOUNT"
,description:["wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE"]};break;case"FLICKR_2_12":case"FLICKR_2_12_1":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16");break;case"FLICKR_2_12_2":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16");break;case"FLICKR_2_12_3":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16");break;case"FLICKR_2_13":case"FLICKR_2_13_1":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20");break;case"FLICKR_2_13_2":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20");break;case"FLICKR_2_13_3":r={title:"wallart.PHOTO_MOUNT",description:["","wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE"]},n===0?r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30":n===1&&(r.description[0]="wallart.PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20")}else if(t==="material")switch(e){case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_13":case"FLICKR_2_13_1":r="lustre";break;case"FLICKR_2_9_2":case"FLICKR_2_11_2":case"FLICKR_2_10_2":case"FLICKR_2_12_2":case"FLICKR_2_13_2":r="glossy";break;case"FLICKR_2_9_3":case"FLICKR_2_11_3":case"FLICKR_2_10_3":case"FLICKR_2_12_3":case"FLICKR_2_13_3":r="matte"}else if(t==="material-pretty")switch(e){case"FLICKR_2_9":case"FLICKR_2_9_1":case"FLICKR_2_11":case"FLICKR_2_11_1":case"FLICKR_2_10":case"FLICKR_2_10_1":case"FLICKR_2_12":case"FLICKR_2_12_1":case"FLICKR_2_13":case"FLICKR_2_13_1":r="wallart.PREMIUM_LUSTRE";break;case"FLICKR_2_9_2":case"FLICKR_2_11_2":case"FLICKR_2_10_2":case"FLICKR_2_12_2":case"FLICKR_2_13_2":r="wallart.GLOSSY";break;case"FLICKR_2_9_3":case"FLICKR_2_11_3":case"FLICKR_2_10_3":case"FLICKR_2_12_3":case"FLICKR_2_13_3":r="wallart.MATTE"}return r},e.WallartHelper.prototype.isValidWallartType=function(e){return typeof e=="string"&&this.validWallartTypes.indexOf(e)>-1},e.WallartHelper.prototype.getCreationsThumbInfo=function(e,t){var n,r,i,s,o,u;return n=this.convertSkuTo(e,"type",t),i=this.convertSkuTo(e,"size",t),s=this.convertSkuTo(e,"size-copy",t),r=this.convertSkuTo(e,"product-description",t),i==="12x12"?o="square":o=t===0?"landscape":"portrait",r||(r={title:""}),u={type:n,size:i,sizeCopy:s,typeCopy:r.title,layout:o},u},e.WallartHelper.prototype.isPhotoWallartable=function(e,t){var n,r=[],i=[],s=[],o=[],u,a,f=[];u=this.getCorrectedLargestSize(e),t||(u.width>=u.height?t=0:t=1);for(a in this.dimensions[t].canvas)u.width>=this.dimensions[t].canvas[a][0]&&u.height>=this.dimensions[t].canvas[a][1]&&f.indexOf(a)<0&&(r.push(a),i.push(this.convertSkuTo(a,"size",t)),s.push("canvas"),o.push("canvas"+this.convertSkuTo(a,"size",t)));for(a in this.dimensions[t].mounted)u.width>=this.dimensions[t].mounted[a][0]&&u.height>=this.dimensions[t].mounted[a][1]&&f.indexOf(a)<0&&(r.push(a),i.push(this.convertSkuTo(a,"size",t)),s.push("mounted"),o.push("mounted"+this.convertSkuTo(a,"size",t)));return n={skus:r,sizes:i,types:s,typeAndSize:o},n}},"@VERSION@",{affinity:"",requires:[],optional:[]});
YUI.add("hermes-template-fluid-share",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){return" disable-sharing"}function h(e,t){var r="",i,s;return r+=' title="',s={hash:{intlName:"share-modal.SHARING_DISABLED"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+'" ',r}function p(e,t){var r="",i,s;return r+='\n	 <span class="fluid-share-button-label">',s={hash:{intlName:"share-modal.SHARE"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):u.call(e,"intlMessage",s)))+"</span>\n	 ",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u=n.helperMissing,a=this.escapeExpression,f="function",l=this;s+='<div class="fluid-share-button ',(o=n.extraShareButtonClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonClassList,o=typeof o===f?o.apply(t):o),s+=a(o),o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+='"\n',o=n["if"].call(t,t.sharingDisabled,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+='>\n\n	<span class="fluid-share-icon ',(o=n.extraShareButtonIconClassList)?o=o.call(t,{hash:{},data:i}):(o=t.extraShareButtonIconClassList,o=typeof o===f?o.apply(t):o),s+=a(o)+'"></span>\n	',o=n["if"].call(t,t.showShareButtonLabel,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;return s+="\n\n </div>\n\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-tumblr-post",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i,s;return r+="\n	<strong>",(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+' <a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',s={hash:{intlName:"common.BY_USER",user:e.ownerName},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a></strong>\n",r}function h(e,t){var r="",i;r+="\n	",i=n["if"].call(e,e.ownerURL,{hash:{},inverse:l.program(6,d,t),fn:l.program(4,p,t),data:t});if(i||i===0)r+=i;return r+="\n",r}function p(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.ownerURL)?i=i.call(e,{hash:{},data:t}):(i=e.ownerURL,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function d(e,t){var r="",i;return r+='\n		<strong><a href="',(i=n.linkToShare)?i=i.call(e,{hash:{},data:t}):(i=e.linkToShare,i=typeof i===u?i.apply(e):i),r+=a(i)+'">',(i=n.title)?i=i.call(e,{hash:{},data:t}):(i=e.title,i=typeof i===u?i.apply(e):i),r+=a(i)+"</a></strong>\n	",r}function v(e,t){var r="",i,s,o;return r+="\n	<br /><i>",o={hash:{intlName:"share-modal.VIA_FLICKR"},data:t},r+=a((i=n.intlMessage||e.intlMessage,i?i.call(e,o):f.call(e,"intlMessage",o)))+"</i>\n	<br />",(s=n.description)?s=s.call(e,{hash:{},data:t}):(s=e.description,s=typeof s===u?s.apply(e):s),r+=a(s)+"\n",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;o=n["if"].call(t,t.ownerName,{hash:{},inverse:l.program(3,h,i),fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+="\n\n",o=n["if"].call(t,t.description,{hash:{},inverse:l.noop,fn:l.program(8,v,i),data:i});if(o||o===0)s+=o;return s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-tumblr-post",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-panel",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function p(e,t){return" sharing-type-disabled"}function d(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(4,v,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function v(e,t){var r="",i,s;return r+='\n								<span class="link-type-button embed-type-button">',s={hash:{intlName:"share-modal.EMBED"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function m(e,t){var r="",i,s;r+="\n							",s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(7,g,t),data:t});if(s||s===0)r+=s;return r+="\n						",r}function g(e,t){var r="",i,s;return r+='\n								<span class="link-type-button bbcode-type-button">',s={hash:{intlName:"share-modal.BBCODE"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+"</span>\n							",r}function y(e,t){return" single-highlight"}function b(e,t){var r="",i;r+='\n						<div class="grab-link-only grab-link">\n\n							',i=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(12,w,t),data:t});if(i||i===0)r+=i;return r+='\n\n							<input readonly type="text" class="grab-link-text-field" value="',(i=n.grabLink)?i=i.call(e,{hash:{},data:t}):(i=e.grabLink,i=typeof i===h?i.apply(e):i),r+=l(i)+'">\n						</div>\n					',r}function w(e,t){var r="",i,s;return r+='\n								<div class="grab-link-permission-field grab-link-field">\n									<span class="grab-link-permission-label">',s={hash:{intlName:"share-modal.SHARE_PUBLIC_ONLY"},data:t},r+=l((i=n.intlHTMLMessage||e.intlHTMLMessage,i?i.call(e,s):f.call(e,"intlHTMLMessage",s)))+'</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n							',r}function E(e,t){var r="",i,s;r+='\n						<div class="sliding-frame">\n						',s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.embedr),{hash:{},inverse:c.noop,fn:c.program(15,S,t),data:t});if(s||s===0)r+=s;r+='\n\n						<div class="link-type-content grab-link">\n\n							',s=n["if"].call(e,e.canHaveGuestpass,{hash:{},inverse:c.noop,fn:c.program(12,w,t),data:t});if(s||s===0)r+=s;r+='\n\n							<input readonly type="text" class="grab-link-text-field" value="',(s=n.grabLink)?s=s.call(e,{hash:{},data:t}):(s=e.grabLink,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n\n						</div>\n\n						',s=n["if"].call(e,(i=e.linkShareDisplay,i==null||i===!1?i:i.bbCode),{hash:{},inverse:c.noop,fn:c.program(17,x,t),data:t});if(s||s===0)r+=s;return r+="\n						</div>\n\n					",r}function S(e,t){var r="",i,s,o;return r+='\n							<div class="link-type-content html-embed">\n								<div class="embed-code-size-field embed-size-field">\n									<span class="embed-code-label">\n									',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultSizeStr,o):f.call(e,"renderTrustedMarkup",e.defaultSizeStr,o)))+'\n									</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								<input readonly type="text" class="embed-code-text-field" value="',(s=n.defaultEmbedrCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultEmbedrCode,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n							</div>\n						',r}function x(e,t){var r="",i,s,o;return r+='\n							<div class="link-type-content html-bb-embed">\n								<div class="bb-code-size-field embed-size-field">\n									<span class="embed-bbcode-label">\n										',o={hash:{},data:t},r+=l((i=n.renderTrustedMarkup||e.renderTrustedMarkup,i?i.call(e,e.defaultBBCodeSizeStr,o):f.call(e,"renderTrustedMarkup",e.defaultBBCodeSizeStr,o)))+'\n									</span>\n									<span class="dropdown-arrow"></span>\n								</div>\n								<input readonly type="text" class="bb-code-text-field" value="',(s=n.defaultBBCode)?s=s.call(e,{hash:{},data:t}):(s=e.defaultBBCode,s=typeof s===h?s.apply(e):s),r+=l(s)+'">\n							</div>\n						',r}function T(e,t){var n="",r;return n+='\n			<div class="email-sharing-panel share-panel">\n				<span class="email-subject">'+l((r=(r=e.emailShareParams,r==null||r===!1?r:r.title),typeof r===h?r.apply(e):r))+'</span>\n\n				<input type="text" class="email-recipient-text-field" placeholder="Screen name or email">\n\n				<div class="recipient-list"></div>\n\n				<input type="text" class="email-message-text-field" placeholder="Include a message">\n\n				<div class="leave-email-sharing">Back</div>\n				<button class="share-by-email">Share Photo</button>\n			</div>\n		',n}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this,h="function";s+='<div class="share-panel-body">\n	<div class="share-panels">\n\n		<div class="main-sharing-panel share-panel">\n			<div class="network-buttons">\n				<span class="share-link '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),typeof o===h?o.apply(t):o))+'">\n					<span class="share-link-icon '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.facebook),typeof o===h?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.FACEBOOK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),typeof o===h?o.apply(t):o))+'">\n					<span class="share-link-icon '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.tumblr),typeof o===h?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TUMBLR"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.twitter),typeof o===h?o.apply(t):o))+'">\n					<span class="share-link-icon '+l((o=(o=t.networkClasses,o==null||
o===!1?o:o.twitter),typeof o===h?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.TWITTER"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),typeof o===h?o.apply(t):o))+'">\n					<span class="share-link-icon '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.pinterest),typeof o===h?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.PINTEREST"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n				<span class="share-link '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),typeof o===h?o.apply(t):o))+" ",u=n.unless.call(t,t.emailShareParams,{hash:{},inverse:c.noop,fn:c.program(1,p,i),data:i});if(u||u===0)s+=u;s+='">\n					<span class="share-link-icon '+l((o=(o=t.networkClasses,o==null||o===!1?o:o.flickr),typeof o===h?o.apply(t):o))+'-icon"></span>\n					<span class="share-link-label">',a={hash:{intlName:"share-modal.MAIL"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+'</span>\n				</span>\n			</div>\n\n			<div class="share-link-types first-stop">\n\n					<div class="link-type-buttons">\n						',u=n.unless.call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(3,d,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-button link-grab-type-button">',a={hash:{intlName:"share-modal.GRAB_LINK"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+"</span>\n\n						",u=n.unless.call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(6,m,i),data:i});if(u||u===0)s+=u;s+='\n\n						<span class="link-type-highlight ',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.noop,fn:c.program(9,y,i),data:i});if(u||u===0)s+=u;s+='"></span>\n\n					</div>\n\n\n				<div class="link-type-contents">\n					',u=n["if"].call(t,t.hideButtons,{hash:{},inverse:c.program(14,E,i),fn:c.program(11,b,i),data:i});if(u||u===0)s+=u;s+='\n\n					<div class="link-instructions">\n						',a={hash:{intlName:"share-modal.COPY_TO_CLIPBOARD"},data:i},s+=l((o=n.intlHTMLMessage||t.intlHTMLMessage,o?o.call(t,a):f.call(t,"intlHTMLMessage",a)))+"\n					</div>\n				</div>\n			</div>\n		</div>\n\n		",u=n["if"].call(t,t.emailShareParams,{hash:{},inverse:c.noop,fn:c.program(19,T,i),data:i});if(u||u===0)s+=u;return s+="\n\n	</div>\n</div>",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-panel",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-embedr-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression;return s+='<a data-flickr-embed="true" href="',(o=n.embedLink)?o=o.call(t,{hash:{},data:i}):(o=t.embedLink,o=typeof o===u?o.apply(t):o),s+=a(o)+'" title="',(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===u?o.apply(t):o),s+=a(o)+'"><img src="',(o=n.farmURL)?o=o.call(t,{hash:{},data:i}):(o=t.farmURL,o=typeof o===u?o.apply(t):o),s+=a(o)+'" width="',(o=n.width)?o=o.call(t,{hash:{},data:i}):(o=t.width,o=typeof o===u?o.apply(t):o),s+=a(o)+'" height="',(o=n.height)?o=o.call(t,{hash:{},data:i}):(o=t.height,o=typeof o===u?o.apply(t):o),s+=a(o)+'" alt="',(o=n.alt)?o=o.call(t,{hash:{},data:i}):(o=t.alt,o=typeof o===u?o.apply(t):o),s+=a(o)+'"></a><script async src="//widgets.flickr.com/embedr/embedr.js" charset="utf-8"></script>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-embedr-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-fluid-share-bb-code",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="by [url=",i=n["if"].call(e,e.authorURL,{hash:{},inverse:l.program(4,d,t),fn:l.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="]",(i=n.authorName)?i=i.call(e,{hash:{},data:t}):(i=e.authorName,i=typeof i===a?i.apply(e):i),r+=f(i)+"[/url]",r}function p(e,t){var r;return(r=n.authorURL)?r=r.call(e,{hash:{},data:t}):(r=e.authorURL,r=typeof r===a?r.apply(e):r),f(r)}function d(e,t){return"shortURL"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a="function",f=this.escapeExpression,l=this,c=n.helperMissing;s+="[url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"][img]",(o=n.farmURL)?o=o.call(t,{hash:{},data:i}):(o=t.farmURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/img][/url][url=",(o=n.shortURL)?o=o.call(t,{hash:{},data:i}):(o=t.shortURL,o=typeof o===a?o.apply(t):o),s+=f(o)+"]",(o=n.title)?o=o.call(t,{hash:{},data:i}):(o=t.title,o=typeof o===a?o.apply(t):o),s+=f(o)+"[/url] ",o=n["if"].call(t,t.authorName,{hash:{},inverse:l.noop,fn:l.program(1,h,i),data:i});if(o||o===0)s+=o;return s+=", ",u={hash:{intlName:"share-modal.ON_FLICKR"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):c.call(t,"intlMessage",u)))+'<script async src="//widgets.flickr.com/embedr/embedr.js" charset="utf-8"></script>',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/fluid-share-bb-code",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("flickr-contacts-getListfetcher",function(e,t){"use strict";function n(t,n){var r=t[0],i=t[1];return r.contacts&&r.contacts.contact&&r.contacts.contact.forEach(function(t){i.exists(t.nsid)||i.add(e.APIHelper.response.parsePerson(t))}),r}function r(n,r){var i=this;return n.extras=(n.extras||"")+", icon_urls, paid_products",e.Promise.all([r.callAPI("flickr.contacts.getList",n),r.getModelRegistry("person-models")]).then(function(e){return i._processResponse(e,n)},e.FetcherErrorLogger(t))}e.namespace("ListFetchers")["flickr-contacts-getList"]={run:r,_processResponse:n}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models"]});
